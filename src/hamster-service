#!/usr/bin/python
# nicked off gwibber

import gobject, dbus
from dbus.mainloop.glib import DBusGMainLoop
import hamster

DBusGMainLoop(set_as_default=True)
loop = gobject.MainLoop()

if hamster.BUS_NAME in dbus.SessionBus().list_names():
    print "Found hamster-service already running, exiting"
    quit()


if __name__ == '__main__':
    from hamster.lib import i18n
    i18n.setup_i18n()

    from hamster import db
    print "hamster-service up"

    storage = db.Storage(loop)
    loop.run()
